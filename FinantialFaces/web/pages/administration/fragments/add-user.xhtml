<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.prime.com.tr/ui"
        xmlns:finantial="http://java.sun.com/jsf/composite/components/finantial"
        xmlns:c="http://java.sun.com/jsp/jstl/core">

    <p:panel>
        <h:panelGrid id="user_grid" columns="2">
            <finantial:label for="username" value="Login:"/>
            <h:inputText id="username" value="#{adminBean.newUser.username}"/>
            <finantial:label for="pass" value="Senha:"/>
            <h:inputSecret id="pass" value="#{adminBean.newUser.password}"/>
            <finantial:label for="fullname" value="Nome:"/>
            <h:inputText id="fullname"  value="#{adminBean.newUser.fullname}"/>
        </h:panelGrid>
        <div align="center">
            <h:panelGrid columns="2" cellspacing="10">
                <p:commandButton value="salvar" action="#{adminBean.addUser}" update="admin_form:admin_panel add_user_msg" oncomplete="handleAddUser(xhr, status, args)"/>
            </h:panelGrid>
        </div>
        <p:messages id="add_user_msg"/>
    </p:panel>

   <script type="text/javascript">
    function handleAddUser(xhr, status, args){
        if(! args.failled){
            setTimeout("waitAddUser()",1000);

            return true;
        }
        return false;
    }

    function waitAddUser(){
        addUserModal.hide();
    }

</script>
</ui:composition>