<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.prime.com.tr/ui"
        xmlns:finantial="http://java.sun.com/jsf/composite/components/finantial"
        xmlns:c="http://java.sun.com/jsp/jstl/core">
  
     <p:panel>
        <h:panelGrid id="edit_grid_despesa" columns="2">
            <h:outputLabel for="edit_descricao_despesa" value="Descrição:"/>
            <h:inputText id="edit_descricao_despesa" value="#{financeBean.despesa.description}"/>
            <h:outputLabel for="edit_data_despesa" value="Data:"/>
            <p:calendar id="edit_data_despesa" effectDuration="0.5" value="#{financeBean.despesa.date}" pattern="dd/MM/yyyy" effect="drop"  showOtherMonths="true"  readOnlyInputText="true" timeZone="America/Sao_Paulo" locale="pt_BR" navigator="true" styleClass="calendar"  showOn="both" mindate="#{tabBean.firstCalendarDate}" maxdate="#{tabBean.lastCalendarDate}"  popupIcon="../resources/images/calendar.png"/>
            <h:outputLabel for="edit_value_despesa" value="Valor:"/>
            <h:inputText id="edit_value_despesa" value="#{financeBean.despesa.value}"/>
            <finantial:label for="edit_subtipo_outcome"  value="#{msg['finance.label.subtipo']}:"/>
            <h:selectOneMenu id="edit_subtipo_outcome" value="#{financeBean.despesa.type}"  style="padding-bottom: 1px;padding-top: 1px;height: 21px;width: 118px;*width: 183px">
                                    <f:selectItems value="#{financeBean.subtiposOutcome}" var="subtipo" itemLabel="#{msg['subtipo.outcome.'.concat(subtipo.description)]}" itemValue="#{subtipo}"/>
                                    <f:converter converterId="outcomeConveter"/>
                                </h:selectOneMenu>
        </h:panelGrid>
         <div align="center">
         <h:panelGrid columns="2" cellspacing="10">
             <p:commandButton value="Remover"  action="#{financeBean.removeOutcome}" process="edit_grid_despesa" ajax="true" update="main_form,messages"/>
             <p:commandButton value="salvar" actionListener="#{financeBean.updateOutcome}" process="edit_finance" ajax="true" update="main_form,edit_msg_outcome,messages" oncomplete="handleEdit(args)"/>
         </h:panelGrid>
         </div>
         <p:messages id="edit_msg_outcome"/>
     </p:panel>


<!--        <p:confirmDialog  modal="true" id="cd" header="Deletar Finança" widgetVar="cd"  message="Tem certeza que deseja remover esta finança?" severity="alert" showEffect="clip" height="150" hideEffect="clip" >
        <div align="center">
        <h:panelGrid columns="2" cellspacing="5">
         <p:commandButton value="Sim" actionListener=""
             update="messages" oncomplete="cd.hide()"/>
         <p:commandButton value="Não" onclick="cd.hide();" type="button" />
         </h:panelGrid>
         </div>
     </p:confirmDialog>-->

<script type="text/javascript">
    function handleEdit(args){
        if(! args.validationFailed){
            setTimeout("wait()",1000);
            
            return true;
        }
        return false;
    }

    function wait(){
        editModal.hide();
    }

</script>
</ui:composition>