<?xml version="1.0" encoding="ISO-8859-1"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.prime.com.tr/ui"
    xmlns:composite="http://java.sun.com/jsf/composite"
    xmlns:ui="http://java.sun.com/jsf/facelets">


    <composite:interface shortDescription="renderiza label e input do tipo obrigatÃ³rio"><!--futuramente colocar decorator - tipo seam:decorate -->

        <composite:attribute  type="br.rmpestano.finantial.model.FinantialMonth" name="month" required="true"  />
      <composite:attribute name="id" />


  </composite:interface>

    <composite:implementation>
        <ui:param name="m" value="#{cc.attrs.month}"/>
        <table width="100%">
            <td width="50%" align="left">
                <p:panel  header="Receitas" toggleable="true" style="text-align: center" toggleSpeed="700">
                    <p:dataTable var="r" id="income_table#{m.monthIndex}"  value="#{m.currentUserIncomesInTheMonth}" rendered="#{not empty m.currentUserIncomesInTheMonth}" paginator="true" rows="5"
                                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="5,10,15" style="border: none">
                        <p:column resizable="true" sortBy="#{r.date}" parser="date" >
                            <f:facet name="header">
                                <h:outputLabel value="#{msg['finance.label.data']}"/>
                            </f:facet>
                            <p:commandLink title="#{msg['finance.tooltip.edit-remove']}" style="text-decoration: none">
                                <h:outputText value="#{r.date}" >
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:commandLink>
                        </p:column>
                        <p:column resizable="true">
                            <f:facet name="header">
                                <h:outputLabel value="#{msg['login.label.username']}"/>
                            </f:facet>
                            <p:commandLink  value="#{r.user}" style="text-decoration: none" />
                        </p:column>
                        <p:column resizable="true">
                            <f:facet name="header">
                                <h:outputLabel value="#{msg['finance.label.descricao']}"/>
                            </f:facet>
                            <p:commandLink value="#{r.description}" style="text-decoration: none"/>
                        </p:column>
                        <p:column resizable="true">
                            <f:facet name="header">
                                <h:outputLabel value="#{msg['finance.label.tipo']}"/>
                            </f:facet>
                            <p:commandLink value="#{msg['subtipo.income.'.concat(r.type)]}" style="text-decoration: none" />
                        </p:column>
                        <p:column resizable="true" sortBy="#{r.value}" parser="number">
                            <f:facet name="header">
                                                                #{msg['finance.label.valor']}
                            </f:facet>
                            <p:commandLink  >
                                <h:outputText style="font-weight: bold;" value="#{r.value}"/>
                            </p:commandLink>
                        </p:column>
                        <p:column>
                            <f:facet name="header">
                                                                #{msg['finance.label.operacoes']}
                            </f:facet>
                            <div style="display: inline;" >
                                <p:commandLink value="editar" action="#{financeBean.prepareEditIncome(r)}"  oncomplete="editModal.show()"  update="edit_panel" />
                                &#160;/&#160;
                                <p:commandLink value="remover" action="#{financeBean.prepareRemoveIncome(r)}" oncomplete="removeModal.show()" update="remove_panel"/>
                            </div>
                        </p:column>

                        <f:facet name="footer" >
                            <table width="100%">
                                <tr>

                                    <td align="center">
                                        <p:panel style="width: 200px;min-height: 25px;height: auto ">
                                            <div align="center">
                                                <h:outputLabel style="font-weight: bold" for="total_receita" value="#{msg['finance.label.total']}:"/>
                                                <h:outputLabel style="padding-left: 5px;color:#{themeService.themeProperties.FINANCE_FOOTER_COLOR}" id="total_receita" value="#{m.totalIncomeInTheMonth}"/>
                                            </div>
                                        </p:panel>

                                    </td>

                                </tr>
                            </table>
                        </f:facet>

                    </p:dataTable>
                    <div align="center">
                        <h:outputText value="Nenhuma receita cadastrada" style="color: red;font-size: 14px" rendered="#{empty m.currentUserIncomesInTheMonth}"/>
                    </div>
                    <div align="center" style="padding-top: 15px">
                        <p:commandButton title="#{msg['finance.tooltip.add-income']}" action="#{financeBean.prepareAddMonthIncome(m)}" value="Nova Receita" async="true" immediate="true" update="month_panel,month_income_msg"  oncomplete="monthModal.show()" />
                    </div>
                </p:panel>

            </td>
            <td  width="50%" align="right">
                <p:panel header="Despesas"  style="text-align: center" toggleable="true" toggleSpeed="700">
                    <p:dataTable id="outcome_table#{m.monthIndex}" var="d" value="#{m.currentUserOutcomesInTheMonth}" rendered="#{not empty m.currentUserOutcomesInTheMonth}"  paginator="true" rows="5"
                                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" rowsPerPageTemplate="5,10,15" style="border: none">
                        <p:column sortBy="#{d.date}" parser="date" >
                            <f:facet name="header">
                                <h:outputLabel value="#{msg['finance.label.data']}"/>
                            </f:facet>
                            <p:commandLink style="text-decoration: none">
                                <h:outputText value="#{d.date}" >
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:commandLink>
                        </p:column>
                        <p:column resizable="true">
                            <f:facet name="header">
                                <h:outputLabel value="#{msg['login.label.username']}"/>
                            </f:facet>
                            <p:commandLink  style="text-decoration: none">
                                <h:outputText value="#{d.user}"/>
                            </p:commandLink>

                        </p:column>
                        <p:column resizable="true">
                            <f:facet name="header">
                                <h:outputLabel value="#{msg['finance.label.descricao']}"/>
                            </f:facet>
                            <p:commandLink style="text-decoration: none">
                                <h:outputText value="#{d.description}"/>
                            </p:commandLink>
                        </p:column>
                        <p:column resizable="true">
                            <f:facet name="header">
                                                                #{msg['finance.label.tipo']}
                            </f:facet>
                            <p:commandLink  style="text-decoration: none">
                                <h:outputText  value="#{msg['subtipo.outcome.'.concat(d.type)]}"/>
                            </p:commandLink>
                        </p:column>
                        <p:column resizable="true" sortBy="#{d.value}" parser="number">
                            <f:facet name="header">
                                                                #{msg['finance.label.valor']}
                            </f:facet>
                            <p:commandLink style="font-weight: bold;text-decoration: none" value="#{d.value}"/>
                        </p:column>

                        <p:column>
                            <f:facet name="header">
                                                                #{msg['finance.label.operacoes']}
                            </f:facet>
                            <div style="display: inline;" >
                                <p:commandLink value="editar" action="#{financeBean.prepareEditOutcome(d)}"  oncomplete="editModal.show()"  update="edit_panel" />
                                &#160;/&#160;
                                <p:commandLink value="remover" action="#{financeBean.prepareRemoveOutcome(d)}" oncomplete="removeModal.show()" update="remove_panel"/>
                            </div>
                        </p:column>

                        <f:facet name="footer" >
                            <table width="100%">
                                <tr>
                                    <td align="center">
                                        <p:panel style="width: 200px;min-height: 25px;height: auto ">
                                            <div align="center">
                                                <h:outputLabel style="font-weight: bold" for="total_depesa" value="#{msg['finance.label.total']}:"/>
                                                <h:outputLabel style="padding-left: 5px;color:#{themeService.themeProperties.FINANCE_FOOTER_COLOR}" id="total_depesa" value="#{m.totalOutcomeInTheMonth}"/>
                                            </div>
                                        </p:panel>

                                    </td>

                                </tr>
                            </table>
                        </f:facet>

                    </p:dataTable>
                    <div align="center">
                        <h:outputText value="Nenhuma despesa cadastrada" style="color: red;font-size: 14px;padding-bottom: 10px" rendered="#{empty m.currentUserOutcomesInTheMonth}"/>
                    </div>
                    <div align="center" style="padding-top: 15px">
                        <p:commandButton title="#{msg['finance.tooltip.add-outcome']}" action="#{financeBean.prepareAddMonthOutcome(m)}" value="Nova Despesa" async="true" immediate="true" update="month_panel,month_outcome_msg"  oncomplete="monthModal.show()" />
                    </div>
                </p:panel>

            </td>
        </table>
    </composite:implementation>



</html>


